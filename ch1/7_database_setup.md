배포 환경에서 데이터가 저장될 데이터베이스를 설정합니다. 직접 EC2에 데이터베이스를 설치하기 보다 AWS에서 관리해 주는 RDS(Relational Database Service)를 이용하겠습니다. EC2와 마찬가지로 프리티어를 제공합니다. 프리티어 제공량은 추후 바뀔 수도 있으니 공식 홈페이지를 참조하세요. 2022년 기준 신규 회원에게 1년간 750시간의 인스턴스 사용량과 20GB의 범용 스토리지와 20GB의 백업 스토리지를 제공합니다.

다음과 같이 AWS 로그인 후 RDS 서비스로 이동합니다.
![[resources/ch1/7/1.png]]

다음과 같이 RDS 페이지에서 데이터베이스를 생성합니다. 좌측 메뉴에서 데이터베이스 페이지로 이동 후 데이터베이스를 생성합니다. 
![[resources/ch1/7/3.png]]

데이터베이스 생성 페이지로 이동 후 다음과 같이 옵션을 설정합니다. 이 책에서는 PostgreSQL을 사용합니다.
![[resources/ch1/7/4.png]]

![[resources/ch1/7/5.png]]

실습 예제는 프리티어로 진행하겠습니다. 다음과 같이 프리티어 옵션을 선택해주세요.
![[resources/ch1/7/6.png]]

다음과 같이 데이터베이스를 설정합니다. DB 인스턴스 식별자는 AWS 콘솔에서 확인할 수 있는 데이터베이스 인스턴스의 이름입니다. 마스터 사용자 이름은 postgres로 진행하겠습니다. 데이터베이스에 접속할 마스터 암호를 입력합니다. 이 책에서는 백엔드 애플리케이션에서 해당 마스터 암호를 환경 변수로 주입받습니다.
![[resources/ch1/7/7.png]]

템플릿을 프리티어로 선택하면 다음과 같이 자동으로 인스턴스가 구성되는 것을 확인할 수 있습니다.
![[resources/ch1/7/8.png]]

프리티어 사용량인 20GB만큼 스토리지를 설정하고, 추가 과금 발생을 막기 위해 스토리지 자동 조정을 비활성화합니다.
![[resources/ch1/7/9.png]]

다음과 같이 연결 설정을 진행합니다. EC2 생성 챕터에서 기본(Default) VPC에 EC2 인스턴스를 생성 했으므로 해당 인스턴스와 같은 기본 VPC를 선택합니다. 그리고 해당 VPC 내부에서만 데이터베이스에 접근할 수 있도록 퍼블릭 액세스를 비활성화 합니다.
![[10_1.png]]

계속해서 데이터베이스를 위한 VPC 보안그룹을 새로 생성합니다. 생성할 보안그룹의 이름을 지정해줍니다.
![[10_2.png]]

데이터베이스의 인증 수단을 암호 인증으로 선택합니다.
![[11.png]]

실습 예제에선 성능 인사이트를 끄고 진행하겠습니다.
![[resources/ch1/7/12.png]]

최하단의 추가 구성 옵션을 클릭하면 다음과 같이 데이터베이스의 옵션을 설정할 수 있습니다. 초기 데이터베이스 이름은 example로 진행하겠습니다. 추후 백엔드 애플리케이션에서 지정한 이름을 사용합니다. 이름을 지정하고 필요한 옵션들을 설정하면 됩니다. 실습 예제에서는 자동 백업, 암호화, 마이너버전 자동 업그레이드를 비활성화 하겠습니다.
![[resources/ch1/7/13_1.png]]

![[13_2.png]]

필요한 옵션들을 설정했다면 데이터베이스 생성 버튼을 클릭합니다. 데이터베이스가 생성되기까지 시간이 조금 소요됩니다. 일정 시간 이후 데이터베이스의 설정이 완료되면 다과 같이 사용 가능 상태를 확인할 수 있습니다.
![[resources/ch1/7/15.png]]


